<template>
  <button
    @click="toggleDarkMode"
    v-if="viewingMode === `light`"
    aria-label="toggle dark mode"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="22"
      height="22"
      viewBox="0 0 16 15"
      fill="none"
      class="moon"
    >
      <path
        d="M6.81395 14.1505C5.80477 14.0111 5.0736 13.8092 4.30145 13.4567C2.17205 12.4846 0.672902 10.6728 0.184535 8.48131C0.0556736 7.90307 0.00858391 6.90593 0.081373 6.29682C0.425616 3.4161 2.59189 1.03634 5.59996 0.234374C5.77304 0.188231 5.91466 0.156411 5.91468 0.163664C5.9147 0.17092 5.77267 0.277917 5.59904 0.401441C5.42541 0.524966 5.09727 0.812434 4.86982 1.04026C3.72877 2.18322 3.13542 3.59214 3.1338 5.16248C3.13207 6.83594 3.76321 8.28086 5.01186 9.46206C7.05567 11.3955 10.0859 11.8424 12.6986 10.5958C13.4321 10.2459 14.2885 9.58476 14.7645 9.00111C14.8981 8.83724 15.0243 8.68448 15.0449 8.66163C15.0655 8.63879 15.0399 8.76796 14.9881 8.94869C14.3386 11.2139 12.4898 13.0462 10.0828 13.8099C9.30179 14.0577 8.8118 14.1323 7.83513 14.152C7.3501 14.1617 6.89057 14.161 6.81395 14.1505Z"
      />
    </svg>
  </button>

  <button
    v-if="viewingMode === `dark`"
    @click="toggleLightMode"
    aria-label="toggle dark mode"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="22"
      height="22"
      viewBox="0 0 44 44"
      fill="none"
      class="sun"
    >
      <path
        d="M21.3557 43.7694C20.6968 43.4042 20.6786 43.2611 20.6735 38.4052C20.6683 33.4096 20.6901 33.2593 21.4668 32.9376C22.0263 32.7058 22.745 32.864 23.0826 33.2932C23.3473 33.6297 23.3573 33.8128 23.3573 38.338C23.3573 41.3015 23.3063 43.1291 23.2189 43.2923C23.0479 43.6118 22.4001 43.9586 21.9861 43.9522C21.8161 43.9497 21.5324 43.8673 21.3557 43.7694ZM6.57424 37.5681C6.09929 37.1684 5.94691 36.6303 6.15365 36.0828C6.34488 35.5764 12.2462 29.6458 12.8386 29.3647C13.7335 28.94 14.754 29.6102 14.754 30.6225C14.754 31.0848 14.5563 31.3111 11.3568 34.5106C8.15737 37.7101 7.93108 37.9078 7.4688 37.9078C7.13995 37.9078 6.84471 37.7957 6.57424 37.5681ZM32.7403 34.5849C29.1933 31.0483 29.0379 30.8345 29.4273 30.0285C29.5267 29.8226 29.8038 29.5402 30.0429 29.401C30.8756 28.9161 31.0696 29.0488 34.4911 32.444C36.2156 34.1552 37.7181 35.729 37.83 35.9413C38.2823 36.799 37.5665 37.9078 36.5605 37.9078C36.1031 37.9078 35.8671 37.7026 32.7403 34.5849ZM20.0709 31.3677C14.372 30.1463 11.0937 24.3612 12.9469 18.7964C13.9382 15.8198 16.8096 13.2582 19.9342 12.5631C21.4578 12.2241 23.5986 12.3391 25.085 12.8399C28.7055 14.0595 31.194 17.2331 31.6234 21.1785C31.8126 22.917 31.1727 25.4903 30.1558 27.0799C27.9934 30.4603 23.9193 32.1924 20.0709 31.3677ZM24.035 28.4929C26.2184 27.8609 28.0861 25.935 28.6627 23.7211C29.8456 19.1796 26.1391 14.7136 21.511 15.104C15.8566 15.5809 13.1498 22.2226 16.8745 26.4805C18.6613 28.523 21.3352 29.2745 24.035 28.4929ZM0.538705 23.0488C0.37655 22.9353 0.173404 22.6071 0.0872616 22.3196C-0.0485296 21.8663 -0.0346646 21.7374 0.191502 21.3501C0.642132 20.5785 0.694549 20.571 5.58612 20.5688C10.3473 20.5668 10.6502 20.6038 10.9861 21.2315C11.2616 21.7463 11.1526 22.506 10.7475 22.8941L10.3705 23.2553H5.602C1.53101 23.2553 0.790407 23.2252 0.538705 23.0488ZM33.2945 22.8624C32.6129 22.1807 32.8095 21.0735 33.6759 20.7146C33.9497 20.6012 35.3545 20.5674 38.6444 20.5952L43.2311 20.634L43.5757 20.958C44.2138 21.5577 44.1152 22.7311 43.3943 23.1169C43.231 23.2043 41.3946 23.2554 38.4115 23.2554H33.6874L33.2945 22.8624ZM9.55796 11.4025C7.76524 9.61522 6.22912 7.9855 6.14436 7.78088C6.02798 7.4999 6.02888 7.29187 6.14793 6.93087C6.35396 6.30657 6.74416 6.04878 7.4831 6.04878H8.08357L11.3441 9.30861C13.4615 11.4255 14.6359 12.6981 14.6939 12.9381C14.9133 13.8473 14.3004 14.6521 13.3885 14.6521C12.8222 14.6521 12.7896 14.6243 9.55796 11.4025ZM29.7676 14.3274C29.359 13.9488 29.2059 13.4582 29.3339 12.9381C29.3925 12.7 30.5836 11.4085 32.6813 9.30861C35.918 6.06848 35.9412 6.04878 36.5121 6.04878C37.2335 6.04878 37.5463 6.21453 37.8186 6.74123C38.2523 7.57974 38.1292 7.75194 34.5415 11.3291C31.2845 14.5767 31.1965 14.6521 30.6634 14.6521C30.273 14.6521 30.0183 14.5598 29.7676 14.3274ZM21.5275 11.0303C21.3714 10.9644 21.1143 10.7461 20.9562 10.5451C20.6751 10.1877 20.6688 10.0773 20.6688 5.48261V0.785478L21.0617 0.392537C21.3699 0.0843682 21.5751 -0.000396729 22.0131 -0.000396729C22.451 -0.000396729 22.6562 0.0843682 22.9644 0.392537L23.3573 0.785478V5.49861V10.2117L22.9876 10.6175C22.5909 11.053 21.9863 11.2239 21.5275 11.0303Z"
      />
    </svg>
  </button>
</template>

<script setup lang="ts">
import { onBeforeMount, ref } from "vue";

const viewingMode = ref("light");
let toggleDarkMode: Function;
let toggleLightMode: Function;

onBeforeMount(() => {
  toggleDarkMode = function () {
    localStorage.setItem("viewing-mode", "dark");
    document.documentElement.classList.add("dark-mode");
    viewingMode.value = "dark";
  };
  toggleLightMode = function () {
    localStorage.setItem("viewing-mode", "light");
    document.documentElement.classList.remove("dark-mode");
    viewingMode.value = "light";
  };

  viewingMode.value = localStorage.getItem("viewing-mode") || "light";

  if (viewingMode.value === "light") toggleLightMode();
  if (viewingMode.value === "dark") toggleDarkMode();
});
</script>

<style lang="scss" scoped>
@use "../../assets/sass/components/_navigation.scss" as *;

button {
  background: none;
  border: none;
  :hover {
    cursor: url("/pointer.png");
  }
}
</style>
