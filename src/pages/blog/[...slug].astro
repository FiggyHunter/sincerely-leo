---
import { slugify } from "@/utils/format";
import RenderedContent from "../../components/RenderedContent.astro";

import BlogPost from "@/layouts/BlogPost.astro";
import { getPosts } from "@/api/posts/getPosts.ts";

export async function getStaticPaths() {
  //Fetching posts
  const posts = await getPosts();

  //generating
  return posts.map((post) => ({
    params: { slug: slugify(post.attributes.Title) },
    props: post,
  }));
}

const post = Astro.props;
---

<BlogPost>
  <RenderedContent {post} />
</BlogPost>
